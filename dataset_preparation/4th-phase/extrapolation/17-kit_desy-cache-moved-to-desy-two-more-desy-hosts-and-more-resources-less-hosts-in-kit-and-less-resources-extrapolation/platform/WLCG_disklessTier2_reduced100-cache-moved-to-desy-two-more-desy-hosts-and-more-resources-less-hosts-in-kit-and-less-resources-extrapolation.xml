<?xml version="1.0"?>
<!DOCTYPE platform SYSTEM "http://simgrid.gforge.inria.fr/simgrid/simgrid.dtd">
<platform version="4.1">
    <config>
        <prop id="network/loopback-bw" value="1000000000000"/>
    </config>

    <zone id="global" routing="Floyd">

        <zone id="KIT" routing="Floyd">

            <zone id="GridKA" routing="Floyd">

                <cluster id="Tier1" prefix="Tier1" radical="0-4" suffix="" speed="1750Mf" core="32" bw="1150Mbps" lat="0us">
                    <prop id="type" value="worker"/>
                    <prop id="ram" value="650GiB"/>
                </cluster>

                <zone id="GridKA-service" routing="Floyd">
                
                    <host id="GridKA_dCache" speed="1000Gf" core="10">
                        <prop id="type" value="cache"/>
                        <disk id="hard_drive" read_bw="920Mbps" write_bw="920Mbps">
                            <prop id="size" value="7PB"/>
                            <prop id="mount" value="/"/>
                        </disk>
                    </host>

                    <host id="WMSHost" speed="10Gf" core="10">
                        <prop id="type" value="scheduler,executor"/>
                        <prop id="ram" value="16GB"/>
                    </host>

                    <router id="GridKAgateway"/>

                    <link id="GridKA_sched" bandwidth="195Mbps" latency="0us"/>

                    <link id="GridKA_Tier1_FATPIPE" bandwidth="2000Mbps" latency="0us" sharing_policy="FATPIPE"/>
                    <link id="GridKA_Tier1" bandwidth="4600Mbps" latency="0us"/>

                    <link id="GridKA_dcachepool_FATPIPE" bandwidth="800Mbps" latency="0us" sharing_policy="FATPIPE"/>
                    <link id="GridKA_dcachepool" bandwidth="1500Mbps" latency="0us"/>

                    <route src="GridKAgateway" dst="WMSHost">
                        <link_ctn id="GridKA_sched"/>
                    </route>

                    <route src="GridKAgateway" dst="GridKA_dCache">
                        <link_ctn id="GridKA_dcachepool_FATPIPE"/>
                        <link_ctn id="GridKA_dcachepool"/>
                    </route>
                </zone>

                <zoneRoute src="GridKA-service" dst="Tier1" gw_src="GridKAgateway" gw_dst="Tier1Tier1_router">
                    <link_ctn id="GridKA_Tier1_FATPIPE"/>
                    <link_ctn id="GridKA_Tier1"/>
                </zoneRoute>

            </zone>


            <zone id="KITcentral" routing="Floyd">

                <router id="KITgateway"/>

                <link id="GridKA_to_KIT" bandwidth="2000Mbps" latency="0us"/>
                <link id="KIT_to_DESY" bandwidth="230Mbps" latency="0us"/>
            
            </zone>


            <zoneRoute src="GridKA" dst="KITcentral" gw_src="GridKAgateway" gw_dst="KITgateway">
                <link_ctn id="GridKA_to_KIT"/>
            </zoneRoute>

        </zone>


        <zone id="DESY" routing="Floyd">

            <zone id="DESYGrid" routing="Floyd">

                <host id="Tier21" speed="3200Mf" core="128">
                    <prop id="type" value="worker"/>
                    <prop id="ram" value="1200GiB"/>
                </host>
                <host id="Tier22" speed="3200Mf" core="96">
                    <prop id="type" value="worker"/>
                    <prop id="ram" value="1000GiB"/>
                </host>
                <host id="Tier23" speed="3200Mf" core="64">
                    <prop id="type" value="worker"/>
                    <prop id="ram" value="600GiB"/>
                </host>

                <host id="DESY_dCache" speed="1000Gf" core="10">
                    <prop id="type" value="storage"/>
                    <disk id="hard_drive" read_bw="920Mbps" write_bw="920Mbps">
                        <prop id="size" value="7PB"/>
                        <prop id="mount" value="/"/>
                    </disk>
                </host>

                <router id="DESYGridgateway"/>

                <link id="DESY_Tier21" bandwidth="1000Mbps" latency="1us"/>
                <link id="DESY_Tier22" bandwidth="1100Mbps" latency="2us"/>
                <link id="DESY_Tier23" bandwidth="900Mbps" latency="3us"/>


                <link id="DESY_dCachepool" bandwidth="900Mbps" latency="0us"/>

                <route src="DESYGridgateway" dst="Tier21">
                    <link_ctn id="DESY_Tier21"/>
                </route>

                <route src="DESYGridgateway" dst="Tier22">
                    <link_ctn id="DESY_Tier23"/>
                </route>

                <route src="DESYGridgateway" dst="Tier23">
                    <link_ctn id="DESY_Tier23"/>
                </route>

                <route src="DESYGridgateway" dst="DESY_dCache">
                    <link_ctn id="DESY_dCachepool"/>
                </route>

            </zone>

            <zone id="DESYcentral" routing="Floyd">

                <router id="DESYgateway"/>

                <link id="DESYGrid_to_DESY" bandwidth="1900Mbps" latency="0us"/>
            
            </zone>

            <zoneRoute src="DESYGrid" dst="DESYcentral" gw_src="DESYGridgateway" gw_dst="DESYgateway">
                <link_ctn id="DESYGrid_to_DESY"/>
            </zoneRoute>

        </zone>

        <zoneRoute src="KIT" dst="DESY" gw_src="KITgateway" gw_dst="DESYgateway">
            <link_ctn id="KIT_to_DESY"/>
        </zoneRoute>

    </zone>

</platform>
